<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
/* <![CDATA[ */
//var theme = {"ajaxurl":"https:\/\/nav.baidu.com\/wp-admin\/admin-ajax.php","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"https:\/\/api.badi.cn\/favicon\/","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
/* ]]> */
</script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>
{{ if $.Site.Params.expandSidebar }}
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/app-anim.js' id='appanim-js'></script>
{{ else }}
<script type='text/javascript' src='{{ $.Site.Params.siteurl }}/assets/js/app-mini.js' id='appmini-js'></script>
{{ end }}
<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>
//夜间(日间)模式
(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();
//夜间(日间)模式切换
$("#search-bg").css("background-image", "url({{ $.Site.Params.images.searchImageL }})");   //默认浅色背景
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background-image", "url({{ $.Site.Params.images.searchImageD }})");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background-image", "url({{ $.Site.Params.images.searchImageL }})")
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>
<!--网站已经运行了多久-->
<script>
    function getTimeDiff(startTime) {
      const now = new Date().getTime();
      const diff = now - startTime;

      const days = Math.floor(diff / (24 * 60 * 60 * 1000));
      const hours = Math.floor((diff % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
      const minutes = Math.floor((diff % (60 * 60 * 1000)) / (60 * 1000));
      const seconds = Math.floor((diff % (60 * 1000)) / 1000);
      return { days, hours, minutes, seconds };
    }

    function updateSiteTime(startTime, elementId) {
      const timeDiff = getTimeDiff(startTime);
      document.getElementById(elementId).innerHTML = `网站已运行 ${timeDiff.days} 天 ${timeDiff.hours} 小时 ${timeDiff.minutes} 分钟 ${timeDiff.seconds} 秒`;
      window.requestAnimationFrame(() => updateSiteTime(startTime, elementId));
    }

    const startTime = new Date("2023-03-01T11:17:00Z").getTime();
    updateSiteTime(startTime, "sitetime");
  </script>

<!--统计超链接点击次数-->
<script> 
  const umamiLinks = document.querySelectorAll('a.umami'); 
  umamiLinks.forEach(link => { link.addEventListener('click', () => {
  const title = link.getAttribute('data-link-name');
  const url = link.getAttribute('href'); 
  umami.trackEvent(`${title}-${url}`, { value: link.getAttribute('link-click') }); }); }); 
 </script>


    <!-- 点击次数 
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch('https://umami.api.xzgl.site/api/getEvents')
            .then(response => response.json())
            .then(resdata => {
                var data=resdata	
                var result = ''
                for(var i=0;i < 5;i++){ 
                    let linktitle = data[i].x.split('-')[0];
                    let linkurl   = data[i].x.split('-')[1];
                    var iconlink="https://api.iowen.cn/favicon/"+linkurl.split('//')[1]+".png";
                    result+=`
                        <div class="url-card col-6  col-sm-6 col-md-4 col-xl-5a col-xxl-6a">
                            <div class="url-body default">
                                <a href="${ linkurl }" target="_blank" data-id="" data-url="${ linkurl }" class="card no-c mb-4 umami" data-link-name="${ linktitle }" data-toggle="tooltip" data-placement="bottom" data-original-title="{{ $link.description }}">
                                    <div class="card-body">
                                        <div class="url-content d-flex align-items-center">
                                            <div class="url-img mr-2 d-flex align-items-center justify-content-center">
                                                {{ if $.Site.Params.defaultLogo }}
                                                    <img class="lazy" src="${ iconlink }" data-src="${ iconlink }" onerror="javascript:this.src='{{ $.Site.Params.defaultLogo }}'" alt="${ linktitle }">
                                                {{ else }}
                                                    <img class="lazy" src="${ iconlink }" data-src="${ iconlink }" onerror="javascript:this.src='${ iconlink }'" alt="${ linktitle }">
                                                {{ end }}
                                            </div>
                                                <div class="url-info flex-fill">
                                                    <div class="text-sm overflowClip_1">
                                                        <strong>${ linktitle }</strong>
                                                    </div>
                                                    <p class="overflowClip_1 m-0 text-muted text-xs">连接访问次数: ${ data[i].y}</p>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                                <a href="${ linkurl }" class="togo text-center text-muted is-views umami" data-link-name="${ linktitle }" data-id="689" data-toggle="tooltip" data-placement="right" title="直达" rel="nofollow">
                                    <i class="iconfont icon-goto"></i>
                                </a>
                            </div>
                        </div>	
                    `
                }
                var umamiDom = document.querySelector('#umamilist');
                umamiDom.innerHTML = result	
            })
         });
    </script>
    <!-- 点击次数 end-->

 
</body>
</html>
